
{{ $rawToc := .TableOfContents }}

{{ $hasToc := gt (len (findRE "<li" $rawToc)) 0 }}

{{ if and (.Params.toc | default true) $hasToc }}
  <div class="post-toc" id="post-toc">
    <aside>
      {{ $emtLiPtrn := "(?s)<ul>\\s<li>\\s<ul>(.*)</li>\\s</ul>" }}
      {{ $rplcEmtLi := "<ul>$1" }}
      {{ $rawToc | replaceRE $emtLiPtrn $rplcEmtLi | safeHTML }}
    </aside>
    <a href="#" id="toc-toggle"></a>
  </div>
{{ end }}
